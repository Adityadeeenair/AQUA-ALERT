:root{
  --blue: #3b82f6;
  --aqua: #4ade80;
  --light: #1f2937;
  --gray: #374151;
  --text: #e5e7eb;
  --muted: #9ca3af;
  --radius: 14px;
  --shadow: 0 8px 30px rgba(0,0,0,.25);
}

*{box-sizing:border-box}
html,body{margin:0;padding:0}
body{
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Ubuntu,"Helvetica Neue",Arial,sans-serif;
  color: var(--text);
  background: #111827;
  line-height: 1.55;
  -webkit-font-smoothing: antialiased;
}

main {
  flex-grow: 1;
}

/* NAVBAR */
.header{
  position:sticky; top:0; z-index:1000; background: rgba(17, 24, 39, 0.8);
  border-bottom: 1px solid var(--gray);
  backdrop-filter: saturate(180%) blur(8px);
}
.nav{
  max-width:1200px; margin:auto; display:flex; align-items:center; justify-content:space-between; gap:16px; padding:14px 20px;
}
.brand{display:flex; align-items:center; gap:10px; font-weight:700; letter-spacing:.2px; color:var(--blue); text-decoration:none}
.brand .drop{width:28px;height:28px;border-radius:50%; background:linear-gradient(135deg,var(--aqua),var(--blue)); display:inline-block; box-shadow:0 6px 16px rgba(59, 130, 246, .35)}
.navlinks{display:flex; gap:12px; align-items:center; flex-wrap:wrap}
.navlinks a{
  text-decoration:none; color:var(--text); padding:10px 12px; border-radius:10px;
}
.navlinks a:hover, .navlinks a.active{background:var(--light); color:var(--aqua)}
.cta{
  background:linear-gradient(135deg,var(--aqua),var(--blue)); color:#fff !important; border:none; padding:10px 14px; border-radius:999px; box-shadow:var(--shadow);
  text-decoration:none; font-weight:600;
}
.burger{display:none; border:none; background:transparent; font-size:24px; color: var(--text);}
.linkbtn {
  background: none; border: 0; color: var(--aqua); cursor: pointer; font: inherit; padding: 0;
}
.linkbtn:hover { text-decoration: underline; }

/* MOBILE MENU */
@media (max-width: 860px){
  .nav{padding:12px 14px}
  .navlinks{display:none; width:100%}
  .navlinks.open{display:flex; flex-direction:column; align-items:flex-start; padding:12px 8px; background: rgba(17, 24, 39, 0.95);}
  .burger{display:block}
}

/* HERO */
.hero{
  position:relative; overflow:hidden; color: var(--text);
  background: #111827;
}
.hero-inner{
  max-width:1200px; margin:auto; padding:64px 20px; display:grid; grid-template-columns:1.1fr .9fr; gap:28px; align-items:center;
}
@media (max-width: 960px){ .hero-inner{grid-template-columns:1fr; padding:48px 16px} }

.hero h1{font-size:clamp(28px,4vw,44px); margin:0 0 12px; color:#fff}
.hero p{color:var(--muted); margin:0 0 20px}
.quick-links{display:flex; gap:10px; flex-wrap:wrap}
.quick-links a{background:var(--light); border:1px solid var(--gray); padding:10px 14px; border-radius:12px; text-decoration:none; color:var(--text)}
.quick-links a:hover{border-color:var(--aqua); color:var(--aqua)}
.quick-links .cta {
  background: #fff; border: 1px solid var(--gray); color: var(--text);
}

.hero-media{
  position:relative; border-radius:var(--radius); overflow:hidden; box-shadow:var(--shadow);
  aspect-ratio: 16/10; background: #000;
}
.hero-media spline-viewer {
  width: 140%; height: 140%;
  position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
}
.hero-media video, .hero-media img{width:100%; height:100%; object-fit:cover; opacity:.92}

.wave{
  position:absolute; left:0; right:0; bottom:-1px; height:80px; pointer-events:none;
  background: radial-gradient(1200px 80px at 50% 10%, rgba(74, 222, 128, .15), transparent 70%);
  animation: swell 8s ease-in-out infinite;
}
@keyframes swell { 0%,100%{transform:translateY(0)} 50%{transform:translateY(6px)} }

/* STATS & SECTIONS */
.section{padding:40px 20px}
.container{max-width:1200px; margin:auto}
.cards{display:grid; grid-template-columns:repeat(4,1fr); gap:16px}
@media (max-width: 960px){ .cards{grid-template-columns: repeat(2,1fr)} }
@media (max-width: 540px){ .cards{grid-template-columns: 1fr} }

.card{
  background:var(--light); border:1px solid var(--gray); border-radius:16px; padding:18px; box-shadow:var(--shadow); position:relative; overflow:hidden;
}
.card h3{margin:4px 0 6px; font-size:16px; color:var(--muted)}
.card .value{font-size:28px; font-weight:800; color:#fff}
.card .spark{position:absolute; right:8px; top:8px; font-size:12px; background:var(--gray); padding:6px 8px; border-radius:999px}

.grid-2{display:grid; grid-template-columns: 1fr 1fr; gap:16px}
@media (max-width: 900px){ .grid-2{grid-template-columns:1fr} }

.panel{
  background:var(--light); border:1px solid var(--gray); border-radius:16px; padding:16px; box-shadow:var(--shadow)
}
.panel h2{margin:0 0 12px; font-size:20px}

/* MAP */
.map-wrap{position:relative}
#map, #report-map{width:100%; height:420px; border-radius:16px; border:1px solid var(--gray); box-shadow:var(--shadow)}
.map-actions{margin-top:10px; display:flex; gap:10px; flex-wrap:wrap}
.btn{border:1px solid var(--gray); background:var(--light); padding:10px 14px; border-radius:12px; cursor:pointer; color: var(--text);}
.btn.primary{border:none; background:linear-gradient(135deg,var(--aqua),var(--blue)); color:#fff}

/* FULLSCREEN TOGGLE */
.fullscreen{
  position:fixed;
  inset:0;
  background:var(--light);
  padding:14px;
  z-index:2000; /* FIX: Was 999, now appears above the header */
}
.fullscreen #map{height:calc(100vh - 28px)}

/* FORMS */
.form{
  display:grid; grid-template-columns:1fr 1fr; gap:14px;
}
.form .full{grid-column:1/-1}
label{font-weight:600; font-size:14px; color:var(--muted)}
input, select, textarea{
  width:100%; padding:12px; border:1px solid var(--gray); border-radius:12px; outline:none;
  background: #111827;
  color: var(--text);
}
input:focus, select:focus, textarea:focus{border-color:var(--aqua); box-shadow:0 0 0 3px rgba(74, 222, 128, .25)}
textarea{min-height:120px; resize:vertical}
.form .actions{display:flex; gap:10px; align-items:center}
.helper{font-size:12px; color:var(--muted)}

/* FAQ */
.accordion{border:1px solid var(--gray); border-radius:14px; overflow:hidden}
.accordion details{border-bottom:1px solid var(--gray); background:var(--light)}
.accordion details[open]{background: #111827;}
.accordion summary{cursor:pointer; padding:16px; font-weight:700; outline:none; list-style:none}
.accordion summary::-webkit-details-marker{display:none}
.accordion .content{padding:0 16px 16px; color:var(--muted)}

/* FOOTER */
.footer{
  margin-top:30px; background:var(--light); color:var(--muted); border-top: 1px solid var(--gray);
}
.footer .inner{max-width:1200px; margin:auto; padding:22px 20px; display:flex; justify-content:space-between; gap:16px; flex-wrap:wrap}
.footer a{color:var(--aqua)}

/* ACCESSIBILITY & UTILITIES */
:focus-visible{outline:3px solid var(--aqua); outline-offset:3px; border-radius:8px}
.visually-hidden{
  position:absolute!important; clip:rect(1px,1px,1px,1px); padding:0; border:0; height:1px; width:1px; overflow:hidden; white-space:nowrap
}
.text-center {
  text-align: center;
}

/* HOMEPAGE - GET STARTED STEPS */
.steps {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  margin-top: 1rem;
}
.step {
  display: flex;
  align-items: center;
  gap: 1rem;
  background-color: #111827;
  padding: 0.75rem;
  border-radius: 12px;
  border: 1px solid var(--gray);
}
.step-number {
  flex-shrink: 0;
  width: 2rem;
  height: 2rem;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  background: var(--blue);
  color: #fff;
  font-weight: 700;
}
.step-text {
  font-size: 1rem;
  color: var(--muted);
}
.step-text a {
  color: var(--aqua);
  text-decoration: none;
  font-weight: 500;
}
.step-text a:hover {
  text-decoration: underline;
}

/* ABOUT PAGE - FEATURE STEPS */
.feature-steps {
  display: flex;
  flex-direction: column;
  gap: 2rem;
}
.feature-step {
  display: flex;
  align-items: flex-start;
  gap: 1.5rem;
}
.feature-step-icon {
  flex-shrink: 0;
  font-size: 2.5rem;
  line-height: 1;
  margin-top: 0.25rem;
}
.feature-step-text h3 {
  font-size: 1.25rem;
  color: var(--text);
  margin: 0 0 0.25rem;
}
.feature-step-text p {
  color: var(--muted);
  margin: 0;
  line-height: 1.6;
}

/* CHATBOT */
.chat-toggle {
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 60px;
  height: 60px;
  background: var(--blue);
  color: #fff;
  border: none;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: 0 4px 20px rgba(0,0,0,0.25);
  transition: transform 0.2s ease-in-out;
  z-index: 1001;
}
.chat-toggle:hover {
  transform: scale(1.1);
}

.chat-window {
  position: fixed;
  bottom: 90px;
  right: 20px;
  width: 350px;
  max-width: calc(100vw - 40px);
  height: 500px;
  max-height: calc(100vh - 110px);
  background: var(--light);
  border: 1px solid var(--gray);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  transform: scale(0.95) translateY(10px);
  opacity: 0;
  pointer-events: none;
  transition: transform 0.2s ease-out, opacity 0.2s ease-out;
  z-index: 1000;
}
.chat-window.open {
  transform: scale(1) translateY(0);
  opacity: 1;
  pointer-events: auto;
}

.chat-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.75rem 1rem;
  background: #111827;
  border-bottom: 1px solid var(--gray);
}
.chat-header h3 {
  margin: 0;
  font-size: 1rem;
}
.chat-close {
  background: none;
  border: none;
  color: var(--muted);
  font-size: 1.5rem;
  line-height: 1;
  cursor: pointer;
}

.chat-messages {
  flex-grow: 1;
  padding: 1rem;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}
.chat-message {
  padding: 0.5rem 0.8rem;
  border-radius: 1rem;
  max-width: 80%;
  line-height: 1.4;
}
.chat-message.bot {
  background: var(--gray);
  color: var(--text);
  align-self: flex-start;
  border-bottom-left-radius: 0.25rem;
}
.chat-message.user {
  background: var(--blue);
  color: #fff;
  align-self: flex-end;
  border-bottom-right-radius: 0.25rem;
}
.chat-message a {
  color: var(--aqua);
}

.chat-input-area {
  padding: 0.75rem;
  border-top: 1px solid var(--gray);
}
.chat-options {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  margin-bottom: 0.75rem;
}
.chat-option {
  flex-grow: 1;
  background: var(--gray);
  border: 1px solid var(--gray);
  color: var(--text);
  padding: 0.5rem;
  border-radius: 8px;
  cursor: pointer;
  text-align: center;
  font-size: 0.8rem;
}
.chat-option:hover {
  background: #111827;
}

.chat-form {
  display: flex;
  gap: 0.5rem;
}
.chat-form input {
  flex-grow: 1;
  padding: 0.6rem;
}
.chat-form button {
  background: var(--blue);
  color: #fff;
  border: none;
  padding: 0 1rem;
  border-radius: 12px;
  cursor: pointer;
}
